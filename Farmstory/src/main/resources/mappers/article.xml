<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.farmstory.dao.ArticleDAO">

    <select id="selectArticles" resultType="kr.co.farmstory.vo.ArticleVO">
            select a.*, b.`nick` from `board_article` as a
            join `board_user` as b on a.uid=b.uid
            where `parent`=0 and `cate`=#{cate}
            order by `no` desc
            limit #{start},10;
    </select>

    <select id="selectCountTotal" resultType="int" parameterType="map">
        select count(`no`) from `board_article` where `parent`=0 and `cate`=#{cate};
    </select>

    <insert id="insertArticle" useGeneratedKeys="true" keyProperty="no">
        insert into `board_article` set
            `cate`=#{cate},
            `title`=#{title},
            `content`=#{content},
            <if test="fname.isEmpty() == true">
                `file`=0,
            </if>
            <if test="fname.isEmpty() == false">
                `file`=1,
            </if>
            `uid`=#{uid},
            `regip`=#{regip},
            `rdate`=NOW();
    </insert>

    <insert id="insertFile">
        insert into `board_file` set
            `parent` =#{parent},
            `newName` =#{newName},
            `oriName` =#{oriName},
            `rdate` =NOW();
    </insert>


</mapper>